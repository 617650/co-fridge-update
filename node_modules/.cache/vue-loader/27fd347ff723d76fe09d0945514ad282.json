{"remainingRequest":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\src\\components\\item\\ClaimButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\src\\components\\item\\ClaimButton.vue","mtime":1642052742891},{"path":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\isabe\\Desktop\\web-projects\\co-fridge\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgewogICAgZXZlbnRCdXMKfSBmcm9tICIuLi8uLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkNsYWltQnV0dG9uIiwKICAgIHByb3BzOiB7CiAgICAgICAgaXRlbTogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjbGFpbUJ1dHRvbjogewogICAgICAgICAgICAgICAgdGV4dDogIkNsYWltIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhaW1lZDogZmFsc2UsCiAgICAgICAgICAgIG9wZW46IGZhbHNlLAogICAgICAgICAgICBxdWFudGl0eTogMCwKICAgICAgICB9OwogICAgfSwKCiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5DaGFuZ2VCdXR0b25UZXh0KCk7CiAgICAgICAgZXZlbnRCdXMuJG9uKCJjbGFpbS1pdGVtLXN1Y2Nlc3MiLCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuQ2hhbmdlQnV0dG9uVGV4dCgpOwogICAgICAgIH0pOwogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgaXNEaXNhYmxlZDogZnVuY3Rpb24oKXsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNsYWltZWQpCiAgICAgICAgcmV0dXJuIHRoaXMuY2xhaW1lZDsKICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBMaXN0TnVtYmVyKGhpZ2hFbmQpIHsKICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gaGlnaEVuZDsgaSsrKSB7CiAgICAgICAgICAgICAgICBsaXN0LnB1c2goaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgfSwKICAgICAgICBTdWJtaXRDbGFpbSgpIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgIC5wb3N0KCIvYXBpL2l0ZW0vY2xhaW0vIiArIHRoaXMuaXRlbS5pZCwgewogICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLnF1YW50aXR5CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImNsYWltLWl0ZW0tc3VjY2VzcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnF1YW50aXR5PTA7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jbGFpbWVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNsYWltQnV0dG9uLnRleHQgPSAiQ2xhaW1lZCI7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgIT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgQ2hhbmdlQnV0dG9uVGV4dCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXRlbS5zdGF0dXMgIT0gMCkgewogICAgICAgICAgICAgICB0aGlzLmNsYWltZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuY2xhaW1CdXR0b24udGV4dCA9ICJPdXQgb2Ygc3RvY2siOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["ClaimButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ClaimButton.vue","sourceRoot":"src/components/item","sourcesContent":["<template>\n<div class=\"claim\">\n    <div>\n        <select class=\"claim-quantity\" v-model=\"quantity\" v-show=\"!claimed\">\n            <option disabled value=\"\">Please select one</option>\n            <option v-for=\"n in ListNumber(item.quantity)\" v-bind:key=\"n\">\n                {{ n }}\n            </option>\n        </select>\n        <button class=\"button\" :disabled=\"isDisabled\" v-on:click=\"SubmitClaim()\">\n            {{ claimButton.text }}\n        </button>\n    </div>\n</div>\n</template>\n\n<script>\n// import { defineComponent } from '@vue/composition-api'\nimport axios from \"axios\";\nimport {\n    eventBus\n} from \"../../main\";\nexport default {\n    name: \"ClaimButton\",\n    props: {\n        item: {\n            type: Object,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            claimButton: {\n                text: \"Claim\",\n            },\n            claimed: false,\n            open: false,\n            quantity: 0,\n        };\n    },\n\n    mounted: function () {\n        this.ChangeButtonText();\n        eventBus.$on(\"claim-item-success\", () => {\n            this.ChangeButtonText();\n        });\n    },\n    computed:{\n      isDisabled: function(){\n        console.log(this.claimed)\n        return this.claimed;\n      }\n    },\n    methods: {\n        ListNumber(highEnd) {\n            var list = [];\n            for (var i = 1; i <= highEnd; i++) {\n                list.push(i);\n            }\n            return list;\n        },\n        SubmitClaim() {\n            axios\n                .post(\"/api/item/claim/\" + this.item.id, {\n                    quantity: this.quantity\n                })\n                .then((response) => {\n                    this.open = false;\n                    eventBus.$emit(\"claim-item-success\", {\n                        data: response.data,\n                    });\n                    this.quantity=0;\n                    // this.claimed = true;\n                    // this.claimButton.text = \"Claimed\";\n                })\n                .catch((error) => {\n                    if (error.response && error.response.status != 200) {\n                        alert(error.response.data.error);\n                    }\n                });\n        },\n        ChangeButtonText() {\n            if (this.item.status != 0) {\n               this.claimed=true;\n                this.claimButton.text = \"Out of stock\";\n            }\n        },\n    },\n};\n</script>\n\n<style scoped>\n.blue-color {\n    color: #3ca3d8;\n}\n</style>\n"]}]}